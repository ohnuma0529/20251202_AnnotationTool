INFO:     Started server process [2889502]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
Loading YOLO model from ../weights/detect/all.pt...
YOLO model loaded.
Loading YOLO Seg model from ../weights/seg/seg.pt...
Initializing YOLOModel with weights: ../weights/seg/seg.pt
Initializing YOLOSegModel with weights: ../weights/seg/seg.pt
YOLO Seg model loaded.
Loading SAM model from ../weights/sam2.1_l.pt...
Initializing SAM2Model with weights: ../weights/sam2.1_l.pt
SAM model loaded.
INFO:     127.0.0.1:46984 - "GET /api/videos HTTP/1.1" 200 OK
INFO:     127.0.0.1:46984 - "GET /api/videos HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/GX010103.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/GX010103 (rate=1.0)
Found 188 cached frames.
INFO:     127.0.0.1:46984 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FGX010103.MP4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46994 - "GET /api/annotations?video_name=GX010103&frame_index=0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:46984 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:55774 - "GET /static/frames/GX010103/GX010103_T00M08S_261.jpg HTTP/1.1" 304 Not Modified
INFO:     172.16.12.53:52574 - "GET /api/annotations?video_name=GX010103&frame_index=9 HTTP/1.1" 200 OK
INFO:     172.16.12.53:52919 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:55774 - "GET /data/crops/GX010103_T00M08S_261_fish_1764772018979_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:52633 - "GET /data/crops/GX010103_T00M08S_261_fish_1764772018982_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:58635 - "GET /data/crops/GX010103_T00M08S_261_fish_1764772018985_3.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:60008 - "GET /data/crops/GX010103_T00M08S_261_fish_1764772018992_5.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51489 - "GET /data/crops/GX010103_T00M08S_261_fish_1764772018995_6.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:62676 - "GET /data/crops/GX010103_T00M08S_261_fish_1764772018988_4.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:55774 - "GET /data/crops/GX010103_T00M08S_261_fish_1764772018998_7.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:47002 - "GET /api/transcription?video_name=GX010103 HTTP/1.1" 200 OK
INFO:     127.0.0.1:47002 - "OPTIONS /api/transcribe HTTP/1.1" 200 OK
Transcribing /home/ohnuma/Marine/onlyvideo/GX010103.MP4...
Loading Whisper model (base)...
  0%|                                               | 0.00/139M [00:00<?, ?iB/s]  4%|█▌                                    | 5.56M/139M [00:00<00:02, 48.6MiB/s] 11%|████▎                                 | 15.6M/139M [00:00<00:01, 79.2MiB/s] 18%|██████▉                               | 25.1M/139M [00:00<00:01, 88.0MiB/s] 26%|█████████▉                            | 36.1M/139M [00:00<00:01, 95.8MiB/s] 33%|████████████▋                         | 46.2M/139M [00:00<00:00, 99.2MiB/s] 41%|███████████████▊                       | 56.4M/139M [00:00<00:00, 101MiB/s] 48%|██████████████████▋                    | 66.3M/139M [00:00<00:00, 102MiB/s] 55%|████████████████████▊                 | 76.0M/139M [00:00<00:00, 88.6MiB/s] 61%|███████████████████████▏              | 84.7M/139M [00:00<00:00, 85.9MiB/s] 70%|██████████████████████████▋           | 97.1M/139M [00:01<00:00, 97.8MiB/s] 78%|███████████████████████████████         | 108M/139M [00:01<00:00, 102MiB/s] 85%|█████████████████████████████████▏     | 118M/139M [00:01<00:00, 88.9MiB/s] 93%|████████████████████████████████████   | 128M/139M [00:01<00:00, 94.5MiB/s]100%|██████████████████████████████████████▉| 138M/139M [00:01<00:00, 95.7MiB/s]100%|███████████████████████████████████████| 139M/139M [00:01<00:00, 93.3MiB/s]
/home/ohnuma/.local/lib/python3.10/site-packages/torch/_utils.py:776: UserWarning: TypedStorage is deprecated. It will be removed in the future and UntypedStorage will be the only storage class. This should only matter to you if you are using storages directly.  To access UntypedStorage directly, use tensor.untyped_storage() instead of tensor.storage()
  return self.fget.__get__(instance, owner)()
Whisper model loaded on cuda
INFO:     172.16.12.53:55774 - "GET /static/frames/GX010103/GX010103_T00M04S_145.jpg HTTP/1.1" 304 Not Modified
INFO:     172.16.12.53:52574 - "GET /api/annotations?video_name=GX010103&frame_index=5 HTTP/1.1" 200 OK
INFO:     172.16.12.53:52919 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:62676 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772021757_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:55774 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772021753_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:52633 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772021766_4.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51489 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772021760_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:60008 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772021763_3.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:58635 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772021769_5.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51489 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772021773_6.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:64635 - "GET /api/annotations?video_name=GX010103&frame_index=5 HTTP/1.1" 200 OK
INFO:     172.16.12.53:50903 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:58320 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772027934_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:61369 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772028237_5.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54101 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772028008_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:49861 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772028089_3.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:63117 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772028163_4.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:64370 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772028081_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54101 - "GET /data/crops/GX010103_T00M04S_145_fish_1764772028245_6.jpg HTTP/1.1" 200 OK
Transcription saved to /mnt/datasets/AnnotationTool/Transcriptions/GX010103/transcription.json
INFO:     127.0.0.1:47002 - "POST /api/transcribe HTTP/1.1" 200 OK
INFO:     172.16.12.53:59828 - "GET /api/videos HTTP/1.1" 200 OK
INFO:     172.16.12.53:59828 - "GET /api/videos HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/GX010103.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/GX010103 (rate=1.0)
Found 188 cached frames.
INFO:     172.16.12.53:56143 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FGX010103.MP4 HTTP/1.1" 200 OK
INFO:     172.16.12.53:59828 - "GET /api/annotations?video_name=GX010103&frame_index=0 HTTP/1.1" 200 OK
INFO:     172.16.12.53:56143 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:56143 - "GET /api/transcription?video_name=GX010103 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/home/ohnuma/Marine/20251202_AnnotationTool/backend/api/endpoints.py", line 484, in get_transcription
    segments = json.load(f)
NameError: name 'json' is not defined
INFO:     172.16.12.53:62921 - "GET /static/frames/GX010103/GX010103_T00M13S_406.jpg HTTP/1.1" 304 Not Modified
INFO:     172.16.12.53:64248 - "GET /api/annotations?video_name=GX010103&frame_index=14 HTTP/1.1" 200 OK
INFO:     172.16.12.53:58732 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:62921 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107360_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56264 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107391_9.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56391 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107388_8.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:59351 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107397_13.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65123 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107384_7.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65383 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107382_6.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:62921 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107394_12.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65383 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107400_14.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56391 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107364_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65123 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107367_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56264 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107371_3.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:59351 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107375_4.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:62921 - "GET /data/crops/GX010103_T00M13S_406_fish_1764772107378_5.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:59351 - "GET /static/frames/GX010103/GX010103_T00M06S_203.jpg HTTP/1.1" 304 Not Modified
INFO:     172.16.12.53:64248 - "GET /api/annotations?video_name=GX010103&frame_index=7 HTTP/1.1" 200 OK
INFO:     172.16.12.53:58732 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:56391 - "GET /data/crops/GX010103_T00M06S_203_fish_1764772108249_5.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56264 - "GET /data/crops/GX010103_T00M06S_203_fish_1764772108246_3.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:59351 - "GET /data/crops/GX010103_T00M06S_203_fish_1764772108236_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65383 - "GET /data/crops/GX010103_T00M06S_203_fish_1764772108252_9.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65123 - "GET /data/crops/GX010103_T00M06S_203_fish_1764772108239_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:62921 - "GET /data/crops/GX010103_T00M06S_203_fish_1764772108242_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:62921 - "GET /static/frames/GX010103/GX010103_T00M02S_87.jpg HTTP/1.1" 304 Not Modified
INFO:     172.16.12.53:64248 - "GET /api/annotations?video_name=GX010103&frame_index=3 HTTP/1.1" 200 OK
INFO:     172.16.12.53:58732 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:65383 - "GET /data/crops/GX010103_T00M02S_87_fish_1764772108819_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56391 - "GET /data/crops/GX010103_T00M02S_87_fish_1764772108831_5.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:59351 - "GET /data/crops/GX010103_T00M02S_87_fish_1764772108825_3.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65123 - "GET /data/crops/GX010103_T00M02S_87_fish_1764772108822_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:62921 - "GET /data/crops/GX010103_T00M02S_87_fish_1764772108816_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56264 - "GET /data/crops/GX010103_T00M02S_87_fish_1764772108828_4.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56264 - "GET /data/crops/GX010103_T00M02S_87_fish_1764772108835_6.jpg HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/DJI_20250508114125_0006_D.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/DJI_20250508114125_0006_D (rate=1.0)
INFO:     172.16.12.53:54712 - "GET /api/transcription?video_name=DJI_20250508114125_0006_D HTTP/1.1" 200 OK
Found 227 cached frames.
INFO:     172.16.12.53:64292 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FDJI_20250508114125_0006_D.MP4 HTTP/1.1" 200 OK
INFO:     172.16.12.53:54712 - "OPTIONS /api/transcribe HTTP/1.1" 200 OK
Transcribing /home/ohnuma/Marine/onlyvideo/DJI_20250508114125_0006_D.MP4...
INFO:     172.16.12.53:58928 - "GET /static/frames/DJI_20250508114125_0006_D/DJI_20250508114125_0006_D_T00M00S_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:64967 - "GET /api/annotations?video_name=DJI_20250508114125_0006_D&frame_index=0 HTTP/1.1" 200 OK
INFO:     172.16.12.53:64292 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:65161 - "GET /data/crops/DJI_20250508114125_0006_D_T00M00S_0_fish_1764772115811_0.jpg HTTP/1.1" 200 OK
Transcription saved to /mnt/datasets/AnnotationTool/Transcriptions/DJI_20250508114125_0006_D/transcription.json
INFO:     172.16.12.53:54712 - "POST /api/transcribe HTTP/1.1" 200 OK
INFO:     172.16.12.53:64997 - "GET /static/frames/DJI_20250508114125_0006_D/DJI_20250508114125_0006_D_T00M44S_2655.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51438 - "GET /api/annotations?video_name=DJI_20250508114125_0006_D&frame_index=5 HTTP/1.1" 200 OK
INFO:     172.16.12.53:54712 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:64997 - "GET /static/frames/DJI_20250508114125_0006_D/DJI_20250508114125_0006_D_T01M02S_3717.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51438 - "GET /api/annotations?video_name=DJI_20250508114125_0006_D&frame_index=22 HTTP/1.1" 200 OK
INFO:     172.16.12.53:54712 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:57081 - "GET /data/crops/DJI_20250508114125_0006_D_T01M02S_3717_fish_1764772124732_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:60618 - "GET /data/crops/DJI_20250508114125_0006_D_T01M02S_3717_fish_1764772124748_24.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:62163 - "GET /data/crops/DJI_20250508114125_0006_D_T01M02S_3717_fish_1764772124751_27.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:61120 - "GET /data/crops/DJI_20250508114125_0006_D_T01M02S_3717_fish_1764772124736_4.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:61814 - "GET /data/crops/DJI_20250508114125_0006_D_T01M02S_3717_fish_1764772124739_7.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:60618 - "GET /data/crops/DJI_20250508114125_0006_D_T01M02S_3717_fish_1764772124742_8.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:61120 - "GET /data/crops/DJI_20250508114125_0006_D_T01M02S_3717_fish_1764772124745_11.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:55491 - "GET /static/frames/DJI_20250508114125_0006_D/DJI_20250508114125_0006_D_T00M52S_3127.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:55843 - "GET /api/annotations?video_name=DJI_20250508114125_0006_D&frame_index=12 HTTP/1.1" 200 OK
INFO:     172.16.12.53:56736 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:55491 - "GET /data/crops/DJI_20250508114125_0006_D_T00M52S_3127_fish_1764772131761_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:60744 - "GET /data/crops/DJI_20250508114125_0006_D_T00M52S_3127_fish_1764772131778_33.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:57539 - "GET /data/crops/DJI_20250508114125_0006_D_T00M52S_3127_fish_1764772131768_23.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:58536 - "GET /data/crops/DJI_20250508114125_0006_D_T00M52S_3127_fish_1764772131771_25.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56298 - "GET /data/crops/DJI_20250508114125_0006_D_T00M52S_3127_fish_1764772131765_4.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54736 - "GET /data/crops/DJI_20250508114125_0006_D_T00M52S_3127_fish_1764772131774_27.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:55843 - "GET /api/annotations?video_name=DJI_20250508114125_0006_D&frame_index=5 HTTP/1.1" 200 OK
INFO:     172.16.12.53:56736 - "POST /api/process HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/DJI_20250508115307_0008_D.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/DJI_20250508115307_0008_D (rate=1.0)
INFO:     172.16.12.53:55843 - "GET /api/transcription?video_name=DJI_20250508115307_0008_D HTTP/1.1" 200 OK
Found 105 cached frames.
INFO:     172.16.12.53:56736 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FDJI_20250508115307_0008_D.MP4 HTTP/1.1" 200 OK
Transcribing /home/ohnuma/Marine/onlyvideo/DJI_20250508115307_0008_D.MP4...
INFO:     172.16.12.53:54736 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M00S_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:53167 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=0 HTTP/1.1" 200 OK
INFO:     172.16.12.53:55843 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:56298 - "GET /data/crops/DJI_20250508115307_0008_D_T00M00S_0_fish_1764772134516_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:58536 - "GET /data/crops/DJI_20250508115307_0008_D_T00M00S_0_fish_1764772134519_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54736 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M07S_472.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:53167 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=8 HTTP/1.1" 200 OK
INFO:     172.16.12.53:55843 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:56298 - "GET /data/crops/DJI_20250508115307_0008_D_T00M07S_472_fish_1764772136699_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:58536 - "GET /data/crops/DJI_20250508115307_0008_D_T00M07S_472_fish_1764772136702_1.jpg HTTP/1.1" 200 OK
Transcription saved to /mnt/datasets/AnnotationTool/Transcriptions/DJI_20250508115307_0008_D/transcription.json
INFO:     172.16.12.53:56736 - "POST /api/transcribe HTTP/1.1" 200 OK
INFO:     172.16.12.53:58938 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M21S_1298.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56343 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=21 HTTP/1.1" 200 OK
INFO:     172.16.12.53:63823 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:64707 - "GET /data/crops/DJI_20250508115307_0008_D_T00M21S_1298_fish_1764772144404_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51020 - "GET /data/crops/DJI_20250508115307_0008_D_T00M21S_1298_fish_1764772144398_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:49304 - "GET /data/crops/DJI_20250508115307_0008_D_T00M21S_1298_fish_1764772144401_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:60199 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M25S_1534.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:50613 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=25 HTTP/1.1" 200 OK
INFO:     172.16.12.53:59794 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:49680 - "GET /data/crops/DJI_20250508115307_0008_D_T00M25S_1534_fish_1764772162795_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:59416 - "GET /data/crops/DJI_20250508115307_0008_D_T00M25S_1534_fish_1764772162798_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:61595 - "GET /data/crops/DJI_20250508115307_0008_D_T00M25S_1534_fish_1764772162802_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:50254 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=8 HTTP/1.1" 200 OK
INFO:     172.16.12.53:57206 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:53483 - "GET /data/crops/DJI_20250508115307_0008_D_T00M07S_472_fish_1764772169714_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54196 - "GET /data/crops/DJI_20250508115307_0008_D_T00M07S_472_fish_1764772169717_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54196 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M13S_826.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:50254 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=14 HTTP/1.1" 200 OK
INFO:     172.16.12.53:57206 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:53483 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772171876_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:59550 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772171879_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:57109 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772171883_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65042 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=14 HTTP/1.1" 200 OK
INFO:     172.16.12.53:61057 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:54978 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772234980_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54331 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772234911_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:55249 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772235048_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65042 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=14 HTTP/1.1" 200 OK
INFO:     172.16.12.53:61057 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:55249 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772239614_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54978 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772239784_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54331 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772239955_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:65042 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=14 HTTP/1.1" 200 OK
INFO:     172.16.12.53:61057 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:54978 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772242307_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:54331 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772242300_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:55249 - "GET /data/crops/DJI_20250508115307_0008_D_T00M13S_826_fish_1764772242313_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:63689 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M06S_413.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:53597 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=7 HTTP/1.1" 200 OK
INFO:     172.16.12.53:51889 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:52829 - "GET /data/crops/DJI_20250508115307_0008_D_T00M06S_413_fish_1764772248217_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51708 - "GET /data/crops/DJI_20250508115307_0008_D_T00M06S_413_fish_1764772248150_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:63689 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M03S_236.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:53597 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=4 HTTP/1.1" 200 OK
INFO:     172.16.12.53:51889 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:63689 - "GET /data/crops/DJI_20250508115307_0008_D_T00M03S_236_fish_1764772249039_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51708 - "GET /data/crops/DJI_20250508115307_0008_D_T00M03S_236_fish_1764772249045_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:52829 - "GET /data/crops/DJI_20250508115307_0008_D_T00M03S_236_fish_1764772249051_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:53597 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=7 HTTP/1.1" 200 OK
INFO:     172.16.12.53:51889 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:52829 - "GET /data/crops/DJI_20250508115307_0008_D_T00M06S_413_fish_1764772250719_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51708 - "GET /data/crops/DJI_20250508115307_0008_D_T00M06S_413_fish_1764772250713_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:52464 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M08S_531.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:57163 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=9 HTTP/1.1" 200 OK
INFO:     172.16.12.53:57169 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:64929 - "GET /data/crops/DJI_20250508115307_0008_D_T00M08S_531_fish_1764772257843_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:63193 - "GET /data/crops/DJI_20250508115307_0008_D_T00M08S_531_fish_1764772257830_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:53924 - "GET /data/crops/DJI_20250508115307_0008_D_T00M08S_531_fish_1764772257836_1.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:54976 - "GET /api/videos HTTP/1.1" 200 OK
INFO:     127.0.0.1:54976 - "GET /api/videos HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/GX010103.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/GX010103 (rate=1.0)
Found 188 cached frames.
INFO:     127.0.0.1:54976 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FGX010103.MP4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54976 - "GET /api/annotations?video_name=GX010103&frame_index=0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:54992 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:64341 - "GET /api/videos HTTP/1.1" 200 OK
INFO:     172.16.12.53:64341 - "GET /api/videos HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/GX010103.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/GX010103 (rate=1.0)
Found 188 cached frames.
INFO:     172.16.12.53:49870 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FGX010103.MP4 HTTP/1.1" 200 OK
INFO:     172.16.12.53:49870 - "GET /api/annotations?video_name=GX010103&frame_index=0 HTTP/1.1" 200 OK
INFO:     172.16.12.53:64341 - "POST /api/process HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/DJI_20250508115307_0008_D.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/DJI_20250508115307_0008_D (rate=1.0)
Found 105 cached frames.
INFO:     172.16.12.53:64341 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FDJI_20250508115307_0008_D.MP4 HTTP/1.1" 200 OK
INFO:     172.16.12.53:49870 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=0 HTTP/1.1" 200 OK
INFO:     172.16.12.53:64341 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:63288 - "GET /data/crops/DJI_20250508115307_0008_D_T00M00S_0_fish_1764772301028_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51416 - "GET /data/crops/DJI_20250508115307_0008_D_T00M00S_0_fish_1764772301032_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:64341 - "GET /api/transcription?video_name=DJI_20250508115307_0008_D HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/home/ohnuma/Marine/20251202_AnnotationTool/backend/api/endpoints.py", line 484, in get_transcription
    segments = json.load(f)
NameError: name 'json' is not defined
INFO:     172.16.12.53:60502 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=0 HTTP/1.1" 200 OK
INFO:     172.16.12.53:54675 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:58300 - "GET /data/crops/DJI_20250508115307_0008_D_T00M00S_0_fish_1764772307461_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:52548 - "GET /data/crops/DJI_20250508115307_0008_D_T00M00S_0_fish_1764772307468_2.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:58300 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M04S_295.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:60502 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=5 HTTP/1.1" 200 OK
INFO:     172.16.12.53:54675 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:52548 - "GET /data/crops/DJI_20250508115307_0008_D_T00M04S_295_fish_1764772309085_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51481 - "GET /data/crops/DJI_20250508115307_0008_D_T00M04S_295_fish_1764772309153_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:58300 - "GET /static/frames/DJI_20250508115307_0008_D/DJI_20250508115307_0008_D_T00M12S_767.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:60502 - "GET /api/annotations?video_name=DJI_20250508115307_0008_D&frame_index=13 HTTP/1.1" 200 OK
INFO:     172.16.12.53:54675 - "POST /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:52548 - "GET /data/crops/DJI_20250508115307_0008_D_T00M12S_767_fish_1764772313637_1.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:51481 - "GET /data/crops/DJI_20250508115307_0008_D_T00M12S_767_fish_1764772313630_0.jpg HTTP/1.1" 200 OK
INFO:     172.16.12.53:56830 - "GET /data/crops/DJI_20250508115307_0008_D_T00M12S_767_fish_1764772313643_2.jpg HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/DJI_20250808070331_0001_D.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/DJI_20250808070331_0001_D (rate=1.0)
INFO:     172.16.12.53:60502 - "GET /api/transcription?video_name=DJI_20250808070331_0001_D HTTP/1.1" 200 OK
Transcribing /home/ohnuma/Marine/onlyvideo/DJI_20250808070331_0001_D.MP4...
INFO:     172.16.12.53:50372 - "GET /api/annotations?video_name=DJI_20250808070331_0001_D&frame_index=13 HTTP/1.1" 200 OK
INFO:     172.16.12.53:65179 - "POST /api/process HTTP/1.1" 200 OK
Transcription saved to /mnt/datasets/AnnotationTool/Transcriptions/DJI_20250808070331_0001_D/transcription.json
INFO:     172.16.12.53:60502 - "POST /api/transcribe HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/DJI_20250508114125_0006_D.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/DJI_20250508114125_0006_D (rate=1.0)
Found 227 cached frames.
INFO:     127.0.0.1:38550 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FDJI_20250508114125_0006_D.MP4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38560 - "OPTIONS /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:38566 - "GET /api/annotations?video_name=DJI_20250508114125_0006_D&frame_index=0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38560 - "GET /api/annotations?video_name=DJI_20250508114125_0006_D&frame_index=0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38550 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:38566 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:38582 - "GET /data/crops/DJI_20250508114125_0006_D_T00M00S_0_fish_1764772662397_0.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:38566 - "GET /api/transcription?video_name=DJI_20250508114125_0006_D HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/home/ohnuma/Marine/20251202_AnnotationTool/backend/api/endpoints.py", line 484, in get_transcription
    return {"segments": segments}
NameError: name 'json' is not defined
Extracting frames from /home/ohnuma/Marine/onlyvideo/GX010103.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/GX010103 (rate=1.0)
Found 188 cached frames.
INFO:     127.0.0.1:38560 - "GET /api/transcription?video_name=GX010103 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/home/ohnuma/Marine/20251202_AnnotationTool/backend/api/endpoints.py", line 484, in get_transcription
    return {"segments": segments}
NameError: name 'json' is not defined
INFO:     127.0.0.1:38550 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FGX010103.MP4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38576 - "GET /api/annotations?video_name=GX010103&frame_index=0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38550 - "POST /api/process HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/GX010011.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/GX010011 (rate=1.0)
INFO:     127.0.0.1:38576 - "GET /api/transcription?video_name=GX010011 HTTP/1.1" 200 OK
Found 187 cached frames.
INFO:     127.0.0.1:38550 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FGX010011.MP4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:38550 - "OPTIONS /api/transcribe HTTP/1.1" 200 OK
INFO:     127.0.0.1:38592 - "GET /static/frames/GX010011/GX010011_T00M00S_0.jpg HTTP/1.1" 200 OK
Transcribing /home/ohnuma/Marine/onlyvideo/GX010011.MP4...
INFO:     127.0.0.1:38550 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:45778 - "GET /api/annotations?video_name=GX010011&frame_index=0 HTTP/1.1" 200 OK
Transcription saved to /mnt/datasets/AnnotationTool/Transcriptions/GX010011/transcription.json
INFO:     127.0.0.1:38576 - "POST /api/transcribe HTTP/1.1" 200 OK
INFO:     127.0.0.1:41354 - "GET /api/transcription?video_name=GX010011 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/home/ohnuma/Marine/20251202_AnnotationTool/backend/api/endpoints.py", line 484, in get_transcription
    return {"segments": segments}
NameError: name 'json' is not defined
INFO:     127.0.0.1:41364 - "GET /api/transcription?video_name=GX010011 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/home/ohnuma/Marine/20251202_AnnotationTool/backend/api/endpoints.py", line 484, in get_transcription
    return {"segments": segments}
NameError: name 'json' is not defined
INFO:     127.0.0.1:41370 - "GET /api/transcription?video_name=GX010011 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
  File "/home/ohnuma/anaconda3/envs/fish_annotation/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/home/ohnuma/Marine/20251202_AnnotationTool/backend/api/endpoints.py", line 484, in get_transcription
    return {"segments": segments}
NameError: name 'json' is not defined
INFO:     127.0.0.1:41376 - "GET /api/videos HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/GX010103.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/GX010103 (rate=1.0)
Found 188 cached frames.
INFO:     127.0.0.1:41376 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FGX010103.MP4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41376 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:41376 - "GET /api/annotations?video_name=GX010103&frame_index=0 HTTP/1.1" 200 OK
INFO:     172.16.12.53:64872 - "GET /api/videos HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/GX010103.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/GX010103 (rate=1.0)
Found 188 cached frames.
INFO:     172.16.12.53:64872 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FGX010103.MP4 HTTP/1.1" 200 OK
INFO:     172.16.12.53:64872 - "OPTIONS /api/process HTTP/1.1" 200 OK
INFO:     172.16.12.53:50160 - "GET /api/annotations?video_name=GX010103&frame_index=0 HTTP/1.1" 200 OK
INFO:     172.16.12.53:64872 - "POST /api/process HTTP/1.1" 200 OK
Extracting frames from /home/ohnuma/Marine/onlyvideo/GX010011.MP4 to /mnt/datasets/AnnotationTool/VideoFrame/GX010011 (rate=1.0)
Found 187 cached frames.
INFO:     127.0.0.1:41376 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FGX010011.MP4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41378 - "GET /api/annotations?video_name=GX010011&frame_index=0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41376 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:41378 - "GET /api/annotations?video_name=GX010011&frame_index=16 HTTP/1.1" 200 OK
INFO:     127.0.0.1:36984 - "GET /static/frames/GX010011/GX010011_T00M22S_667.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:41376 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:36996 - "GET /data/crops/GX010011_T00M22S_667_fish_1764772741007_0.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:36996 - "GET /static/frames/GX010011/GX010011_T01M11S_2146.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:41378 - "GET /api/annotations?video_name=GX010011&frame_index=32 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41376 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:36996 - "GET /static/frames/GX010011/GX010011_T01M20S_2407.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:41378 - "GET /api/annotations?video_name=GX010011&frame_index=38 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41376 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:36996 - "GET /data/crops/GX010011_T01M20S_2407_fish_1764772745859_20.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:36996 - "GET /data/crops/GX010011_T01M20S_2407_fish_1764772745862_24.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:36996 - "GET /data/crops/GX010011_T01M20S_2407_fish_1764772745856_18.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:60616 - "GET /data/crops/GX010011_T01M20S_2407_fish_1764772745842_0.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:60630 - "GET /data/crops/GX010011_T01M20S_2407_fish_1764772745846_3.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:60646 - "GET /data/crops/GX010011_T01M20S_2407_fish_1764772745849_6.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:60660 - "GET /data/crops/GX010011_T01M20S_2407_fish_1764772745853_11.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:60660 - "GET /static/frames/GX010011/GX010011_T01M44S_3132.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:41376 - "GET /api/annotations?video_name=GX010011&frame_index=62 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41378 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:60646 - "GET /data/crops/GX010011_T01M44S_3132_fish_1764772749168_9.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:60646 - "GET /static/frames/GX010011/GX010011_T02M09S_3886.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:41376 - "GET /api/annotations?video_name=GX010011&frame_index=86 HTTP/1.1" 200 OK
INFO:     127.0.0.1:41378 - "POST /api/process HTTP/1.1" 200 OK
INFO:     127.0.0.1:60660 - "GET /data/crops/GX010011_T02M09S_3886_fish_1764772751451_0.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:60630 - "GET /data/crops/GX010011_T02M09S_3886_fish_1764772751460_3.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:60616 - "GET /data/crops/GX010011_T02M09S_3886_fish_1764772751456_1.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:60672 - "GET /data/crops/GX010011_T02M09S_3886_fish_1764772751464_5.jpg HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
Extraction complete. Saved 0 frames.
INFO:     172.16.12.53:54675 - "GET /api/frames?video_path=%2Fhome%2Fohnuma%2FMarine%2Fonlyvideo%2FDJI_20250808070331_0001_D.MP4 HTTP/1.1" 200 OK
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [2889502]
